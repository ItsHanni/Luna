{"ast":null,"code":"var _jsxFileName = \"E:\\\\Do_an_bao_ve\\\\client\\\\src\\\\pages\\\\host\\\\newRoom\\\\NewRoom.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { AuthContext } from \"../context/AuthContext\"; // Sử dụng AuthContext để lấy thông tin host\n\nimport useFetch from \"../hooks/useFetch\"; // Custom hook để fetch dữ liệu\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst NewRoom = () => {\n  _s();\n\n  const {\n    user\n  } = useContext(AuthContext); // Lấy user từ AuthContext\n\n  const [hotels, setHotels] = useState([]);\n  const [hotelId, setHotelId] = useState(\"\"); // Lưu hotelId khi chọn option\n\n  const [roomData, setRoomData] = useState({\n    title: \"\",\n    price: \"\",\n    maxPeople: \"\",\n    desc: \"\",\n    roomNumbers: []\n  }); // Sử dụng custom hook để lấy danh sách các khách sạn mà host đã tạo\n\n  const {\n    data,\n    loading,\n    error\n  } = useFetch(`/api/hotels/host/${user._id}`);\n  useEffect(() => {\n    if (data) {\n      setHotels(data); // Cập nhật danh sách khách sạn\n    }\n  }, [data]);\n\n  const handleChange = e => {\n    setRoomData(prev => ({ ...prev,\n      [e.target.id]: e.target.value\n    }));\n  };\n\n  const handleRoomNumbers = e => {\n    setRoomData(prev => ({ ...prev,\n      roomNumbers: e.target.value.split(\",\").map(num => ({\n        number: num\n      }))\n    }));\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    try {\n      await axios.post(`/api/rooms/${hotelId}`, roomData);\n      alert(\"Room created successfully!\");\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"new-room\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Create a New Room\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), loading ? \"Loading hotels...\" : error ? /*#__PURE__*/_jsxDEV(\"span\", {\n      children: \"Error loading hotels.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"hotelSelect\",\n        children: \"Select Hotel:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"hotelSelect\",\n        onChange: e => setHotelId(e.target.value) // Lấy hotelId khi chọn option\n        ,\n        required: true,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Choose a hotel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this), hotels.map(hotel => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: hotel._id,\n          children: hotel.name\n        }, hotel._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"title\",\n        children: \"Room Title\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"title\",\n        value: roomData.title,\n        onChange: handleChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"desc\",\n        children: \"Description\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        id: \"desc\",\n        value: roomData.desc,\n        onChange: handleChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"price\",\n        children: \"Price\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        id: \"price\",\n        value: roomData.price,\n        onChange: handleChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"maxPeople\",\n        children: \"Max People\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        id: \"maxPeople\",\n        value: roomData.maxPeople,\n        onChange: handleChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"roomNumbers\",\n        children: \"Room Numbers (separate with commas)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"roomNumbers\",\n        onChange: handleRoomNumbers,\n        placeholder: \"Example: 101,102,103\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Create Room\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n};\n\n_s(NewRoom, \"h/PP9m5BtvNYR5zJdd2PHgkvZG4=\", false, function () {\n  return [useFetch];\n});\n\n_c = NewRoom;\nexport default NewRoom;\n\nvar _c;\n\n$RefreshReg$(_c, \"NewRoom\");","map":{"version":3,"sources":["E:/Do_an_bao_ve/client/src/pages/host/newRoom/NewRoom.jsx"],"names":["React","useContext","useEffect","useState","axios","AuthContext","useFetch","NewRoom","user","hotels","setHotels","hotelId","setHotelId","roomData","setRoomData","title","price","maxPeople","desc","roomNumbers","data","loading","error","_id","handleChange","e","prev","target","id","value","handleRoomNumbers","split","map","num","number","handleSubmit","preventDefault","post","alert","err","console","hotel","name"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { AuthContext } from \"../context/AuthContext\"; // Sử dụng AuthContext để lấy thông tin host\r\nimport useFetch from \"../hooks/useFetch\"; // Custom hook để fetch dữ liệu\r\n\r\nconst NewRoom = () => {\r\n  const { user } = useContext(AuthContext); // Lấy user từ AuthContext\r\n  const [hotels, setHotels] = useState([]);\r\n  const [hotelId, setHotelId] = useState(\"\"); // Lưu hotelId khi chọn option\r\n  const [roomData, setRoomData] = useState({\r\n    title: \"\",\r\n    price: \"\",\r\n    maxPeople: \"\",\r\n    desc: \"\",\r\n    roomNumbers: [],\r\n  });\r\n\r\n  // Sử dụng custom hook để lấy danh sách các khách sạn mà host đã tạo\r\n  const { data, loading, error } = useFetch(`/api/hotels/host/${user._id}`);\r\n\r\n  useEffect(() => {\r\n    if (data) {\r\n      setHotels(data); // Cập nhật danh sách khách sạn\r\n    }\r\n  }, [data]);\r\n\r\n  const handleChange = (e) => {\r\n    setRoomData((prev) => ({ ...prev, [e.target.id]: e.target.value }));\r\n  };\r\n\r\n  const handleRoomNumbers = (e) => {\r\n    setRoomData((prev) => ({\r\n      ...prev,\r\n      roomNumbers: e.target.value.split(\",\").map((num) => ({ number: num })),\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      await axios.post(`/api/rooms/${hotelId}`, roomData);\r\n      alert(\"Room created successfully!\");\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"new-room\">\r\n      <h1>Create a New Room</h1>\r\n      {loading ? (\r\n        \"Loading hotels...\"\r\n      ) : error ? (\r\n        <span>Error loading hotels.</span>\r\n      ) : (\r\n        <form onSubmit={handleSubmit}>\r\n          {/* Chọn khách sạn */}\r\n          <label htmlFor=\"hotelSelect\">Select Hotel:</label>\r\n          <select\r\n            id=\"hotelSelect\"\r\n            onChange={(e) => setHotelId(e.target.value)} // Lấy hotelId khi chọn option\r\n            required\r\n          >\r\n            <option value=\"\">Choose a hotel</option>\r\n            {hotels.map((hotel) => (\r\n              <option key={hotel._id} value={hotel._id}>\r\n                {hotel.name}\r\n              </option>\r\n            ))}\r\n          </select>\r\n\r\n          {/* Nhập thông tin phòng */}\r\n          <label htmlFor=\"title\">Room Title</label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"title\"\r\n            value={roomData.title}\r\n            onChange={handleChange}\r\n            required\r\n          />\r\n\r\n          <label htmlFor=\"desc\">Description</label>\r\n          <textarea\r\n            id=\"desc\"\r\n            value={roomData.desc}\r\n            onChange={handleChange}\r\n            required\r\n          />\r\n\r\n          <label htmlFor=\"price\">Price</label>\r\n          <input\r\n            type=\"number\"\r\n            id=\"price\"\r\n            value={roomData.price}\r\n            onChange={handleChange}\r\n            required\r\n          />\r\n\r\n          <label htmlFor=\"maxPeople\">Max People</label>\r\n          <input\r\n            type=\"number\"\r\n            id=\"maxPeople\"\r\n            value={roomData.maxPeople}\r\n            onChange={handleChange}\r\n            required\r\n          />\r\n\r\n          <label htmlFor=\"roomNumbers\">\r\n            Room Numbers (separate with commas)\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"roomNumbers\"\r\n            onChange={handleRoomNumbers}\r\n            placeholder=\"Example: 101,102,103\"\r\n            required\r\n          />\r\n\r\n          <button type=\"submit\">Create Room</button>\r\n        </form>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewRoom;\r\n"]},"metadata":{},"sourceType":"module"}